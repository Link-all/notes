#### 分布式

1. 了解 CAP 吗，CAP原理？
2. 微服务设计问题，RPC实现方式简单介绍；
3. 如何保证数据库与缓存双写的一致性？？
4. 讲下raft算法的基本流程？raft算法里面如果出现脑裂怎么处理？有没有了解过paxos和zookeeper的zab算法，他们之前有啥区别？
5. 谈一谈负载均衡（http重定向、DNS域名解析、Nginx、Zookeeper）？
6. 分布式服务接口的幂等性如何设计，防止重复提交-----结合开发场景的问题
7. 分布式服务接口请求的顺序性--------
10. 分布式文件系统了解么？HDFS讲一下原理
9. 你说了解分布式事务，那么你怎么理解分布式事务。
10. 如何理解幂等?项目中接口的幂等是如何做的? 

11. 项目中有分布式事务处理吗？有哪些常见的分布式事务处理方式？说一下你们在项目中怎么用的。-

13. 实现分布式锁的方式----------redis分布式锁和zookeeper分布式锁结合项目来说，以上两种方式的实现和异同

16. 关于分布式事务、以及分布式事务问题------

18. 什么是分布式锁以及其实现原理和使用场景；

1. 循环依赖怎么解决？

2. Spring 工作原理？

3. Spring 怎么实现事务？@Transactional 的原理和注意事项？Spring 事务的种类？Spring 事务的传播行为有哪几种？

4. Spring Bean 生命周期和作用域？

5. @Autowire 实现原理？

6. Spring IOC 和 AOP 的原理？

7. Spring MVC 的底层逻辑和原理？处理请求的流程？

8. Spring 中常用的设计模式？

9. Spring 常用的注解？

10. Spring Task 是怎么实现的？

11. Spring boot 启动加载过程？

12. 简述Spring、Spring MVC、Spring boot 的关系？

13. BeanFactory 和 ApplicationContext 有什么区别？

    

    

    

    ApplicationContext 是 BeanFactory 的子接口，BeanFactory 包含了各种 Bean 的定义，读取 Bean 配置文档，管理 Bean 的加载、实例化，控制bean的生命周期，维护bean之间的依赖关系。而 ApplicationContext 接口作为 BeanFactory 的派生，除了提供BeanFactory 所具有的功能外，还提供了更完整的框架功能：统一的资源文件访问方式、加载多个配置文件、载入上下文等等。

    

**BeanFactory**

是一个管理 Bean 的 IOC 核心接口，它的职责包括：实例化、定位、配置应用程序中的对象及建立这些对象间的依赖。

**ApplicationContext**



spring动态的两种方式是什么?请分别描述一下细节?平时我们用哪一种?平时在项目中用到了吗?能否结合项目来描述一下?两种动态实现原理？JDK动态为什么要实现接口？动态是怎么实现的？


#### redis

1. redis 里的 CAP 是怎样的?
2. 3.redis数据结构 持久化 哨兵 cluster数据分片规则
3. redis读qps、写qps，Nginx qps；
4. redis优化策略（就管道、减少socket链接）
5. 6、redis有哪几种数据类型，如何持久化，怎么更新，使用场景，主从复制怎么做？影响redis的瓶颈？
6. 业务中redis如何保证可用性
7. Redis 的 zset，再到 LSM 树
8. 对redis里的数据结构的实现熟悉吗
9. 用过 Redis 的哪几种数据结构? (都用过) ZSET 是怎么实现的?

11. > redis主从复制怎么实现？

    
    
    > 了解 CAP 吗?redis 里的 CAP 是怎样的?
    >
    > - Consistency 一致性
    >- Availability 可用性
    > - Partition tolerance 分区容错 一般，都在C、A之间进行权衡。
    >
    > redis简单主从模式侧重于CP的，即对于一致性要求较高。 redis-cluster，则属于AP类型，更加强调可用性 cap就是帽子，绿油油的那种。
    > 
    > 分布式锁有哪些主流实现方式?redis 和 zk 锁有什么区别? 大体分为两类。 乐观锁： 基于版本号机制和CAS实现，与存放版本号的存储无关。 悲观锁：
    >
    > 1. 基于数据库记录，进入时写数据，退出时删记录
    >2. 数据库行锁，比如分布式quartz，它是一把排它锁
    > 3. 基于Redis的setnx函数（由于大多数会设置超时，所以推荐用带px的set原子函数）
    >4. 基于zookeeper
    > 
    > 区别： redis获取锁是轮训机制。锁释放后会有多个调用者争抢，某些任务有可能饿死。 zk是监听机制，有变动会接到通知。除了非公平锁，也可以实现公平锁。 从优雅性来说，显然redis胜出
    
12. 说一个zset的跳表

13. 用过redis的哪些数据结构，分别用在什么场景

14. 说说redis？持久化方式？

15. 你们开发项目的应用场景使用到缓存的目的是什么？缓存会有哪些问题？如何预防？-----考察的缓存的优劣，优点肯定是在并发请求提高性能，遇到的问题就是“缓存穿透”和“缓存击穿”，“缓存雪崩”，双写不一致等。 如何解决上述遇到的问题？--------缓存穿透就是做无用功，从缓存再到数据库查询一个不存在的数据，导致性能的被浪费，所以解决方案就是预先校验用户的请求或者第一次查询时设置一个具有短时间过期时效的key来 存放值为null的value，避免再去找数据库。缓存击穿就是在缓存数据过期后，海量并发一下子涌入到数据库，解决方案就是注意热点数据的过期时间，或者使用互斥锁第一次访问key先锁住，写入缓存中，这样后面的请求就不用涌入数据库了。缓存雪崩就是缓存服务器宕机或者在某一时刻多个key时效，解决方案就是对每个key的过期时间设置一个随机值，而不是所有key相同，使用高可用分布式集群redis-cluster。双写不一致，就是缓存和数据库的数据不一致，缓存数据来源于数据库，所以更新数据库时先要把原来的缓存删除再更新数据库。

16. redis存储方式 快照（RDB文件），数据先存在内存，累计达到阈值后dump。文件小，性能高。 AOF，数据先存在内存，异步记录写操作。文件大（可以使用重写减少），实时/准实时

17. redis有哪几种数据结构？给你一个key怎么知道是用的哪种结构？

19. Redis支持的数据类型？---------String（基本的字符串）/Hash（键值对）/List（链表）/Set（集合）/zset（有序集合）…… Redis的持久化，持久化方式，优缺点？-----说白了就是内存数据落地到磁盘上，两种方式RDB（内存数据通过rdbSave函数生成RDB文件，一旦服务宕机内存丢失，重启后可以从磁盘的RDB文件中rdbLoad加载恢复数据）和AOF（通过flushAppendOnlyFile函数定时将缓存写入到AOF文件并保存到磁盘）。优缺点，无非是性能和安全…… Redis的通讯协议？--------RESP为客户端和服务端的通讯协议…… Redis的架构模式，以及各自的特点-------单机版（空间有限，无法高可用，一旦宕机就完了），主从复制（masterf负责写，slave负责读，多个slave实时复制一个master数据到自己的节点）…… 你说的那个主从复制还有别的别的瓶颈问题吗？----------突然觉得自己是挖坑了，懵懂了……面试官又点拨了下写一台master，master也会有压力呀。原来是master高可用压力崩溃宕机的问题，哨兵机制监控主从redis，进行故障转移……。 redis-cluster集群的相关--------主要是高可用，可扩展，但给人一种乱的感觉，各个节点互联，没有中心架构的特点……。 Redis分布式锁的实现------------------ Redis异步队列，怎么用？------- 缓存穿透？缓存雪崩？以及避免措施------缓存穿透，就是由于Redis内存数据库的数据来源于关系型数据库（例如Mysql），为了提高效率查询数据时先经过内存数据库，如果没有在去查mysql，但是对于一些恶意的请求频繁查询不存在的数据，则内存数据库如同虚设，所有的压力都跑到了mysql。避免措施，通过对请求的过滤，把不存在的数据放到Bitmap来应对，或者对请求不存在的数据也可以短时间设置到缓存中。缓存雪崩，就是缓存服务器宕机失效，请求压力又转移到了Mysql，设置不同过期时间的key，让缓存失效的时间点尽量均匀。

20. 3.描述下redis淘汰策略？如果没有数据可以淘汰活着没有配置淘汰策略读请求可以正常执行吗？

21. 4.你们项目里redis是单节点的吗？如果多节点怎么同步？

22. 5.项目里用redis存哪些数据？为什么用redis？和jetty本地缓存有什么区别？

23. 我现在要做一个限流功能, 怎么做?令牌桶这个限流要做成分布式的, 怎么做?

24. .redis有哪几种数据结构？给你一个key怎么知道是用的哪种结构？

25. 2.怎么查看所有的key？redis怎么切换库？怎么清数据？

26. 3.描述下redis淘汰策略？如果没有数据可以淘汰活着没有配置淘汰策略读请求可以正常执行吗？

30. 缓存数据类型

31. 11.Redis发生主备切换会出现什么问题？

32. 8.redis实现分布式锁与用zk实现有什么区别，你用的redis，知道用zk怎么实现吗？

34. 缓存同步机制

35. 2、看你在项目中用了redis，我们先聊聊redis吧，常用的数据结构有哪几种，在你的项目中用过哪几种，以及在业务中使用的场景，redis的hash怎么实现的，rehash过程讲一下和JavaHashMap的rehash有什么区别？redis cluster有没有了解过，怎么做到高可用的？

36. 2、redis支持的数据类型到跳跃表，redis同步策略

37. redis集群和哨兵机制有什么区别？redis的持久化机制了解吗？你们在项目中是怎么做持久化的？遇到过redis的hotkey吗？怎么处理的？redis是单线程的吗？单线程为什么还这么快？讲一讲redis的内存模型？

38. 为什么使用redis做缓存而不是其他的消息队列入kafka，以及项目的稳定性。

39. 3.redis底层实现，redis是如何更新缓存的？

跳表

zrange start, stop, 总长度为 n, 复杂度是多少?

1. redis有哪些数据类型？Redis持久化有哪些方式？分别优缺点是什么？ 10.项目中有使用到redis吗？redis更新策略是什么？

2. redis缓存过期策略，准备同步，哨兵机制和集群的区别

   O(logN) (答得不好，实际是 O(M+log(N)), M 是结果集基数 stop-start)Redis 去重、假如场景量极大且允许误判，布隆过滤器也可以

   令牌桶维护到 Redis 里，每个实例起一个线程抢锁，抢到锁的负责定时放令牌 怎么抢锁?

   Redis setnx 锁怎么释放?

   抢到锁后设置过期时间，线程本身退出时主动释放锁，假如线程卡住了，锁过期那么其它线程可以继续抢占 加了超时之后有没有可能在没有释放的情况下, 被人抢走锁

   有可能，单次处理时间过长，锁泄露 怎么解决?

   换 zk，用心跳解决 不用 zk 的心跳, 可以怎么解决这个问题呢?

   每次更新过期时间时，Redis 用 MULTI 做 check-and-set 检查更新时间是否被其他线程修改了，假如被修改了，说明锁已经被抢走，放弃这把锁 假如这个限流希望做成可配置的, 需要有一个后台管理系统随意对某个 api 配置全局流量, 怎么做？

   在 Redis 里存储每个 API 的令牌桶 key，假如存在这个 key，则需要按上述逻辑进行限流 某一个业务中现在需要生成全局唯一的递增 ID, 并发量非常大, 怎么做

   snowflake (这个其实答得不好，snowflake 无法实现全局递增，只能实现全局唯一，单机递增，面试结束后就想到了类似 TDDL 那样一次取一个 ID 段，放在本地慢慢分配的策略）

#### 系统设计

2. 断路器 断路器内部怎么实现的?

   可以用 ringbuffer 断路器会造成写入失败, 假如我们不允许写入失败呢?

   先写进消息队列，削峰填谷异步落库

3. 设计一个抽奖系统，每个人抽到的都不是自己的

4. 聊项目, 警报怎么做的, 统一接入监控项怎么做的

5. 聊项目, 配置中心项目, 问实时配置推送怎么做

6. 讨论为什么选择所有的组件依赖放在配置中心中控制

7. 4、请你设计一个海量数据存储系统？

8. 聊我之前做的一个数据同步的项目，大概内容是订阅 MySQL Binlog，sink 到搜索索引、分库分表以及业务事件订阅流中 为什么数据同步里选择了 xxxx 开源项目，优势在哪？ 订阅分库分表的 Binlog 怎么订阅？ 分库分表的数据源中假如存在主键冲突要怎么解决？ 怎么保证下游对 Binlog 的消费顺序？ 如何在下游保证消费时的事务原子性？ 描述了一下 tidb 的 binlog 架构，问这种场景下怎么保证 Binlog 顺序 聊我之前做的监控警报项目，问背景和产出

9. 头条的文章的评论量非常大, 比如说一篇热门文章就有几百万的评论, 设计一个后端服务, 实现评论的时序展示与分页 我: 需不需要支持页码直接跳转? 面试官: 支持和不支持两种场景都考虑一下 我: 不需要支持页码翻页就传评论 id 用 offset 翻页 假如用 id 翻页的方式, 数据库表如何设计? 索引如何设计?

   (文章id, 评论id) 建联合索引，评论 id 需递增 假如量很大, 你觉得需要分库分表吗? 怎么分?

   需要分，分表有个权衡，按文章 id 分表，读逻辑简单，但写有热点问题；按评论 id 分表，读逻辑复杂，但写压力就平均了。写是要首先保证的，而读总是有缓存等方案来折中，因此按平均 id 分表好。 分库分表后怎么查询分页?

   每张表查 N 条数据由 client 或 proxy merge 分库分表后怎么保证主键仍然是递增的?

   讲了 TDDL 的办法：有一张专门用于分配主键的表，每次用乐观锁的方式尝试去取一批主键过来分配，假如乐观锁失败就重试 现在需要支持深分页, 页码直接跳转, 怎么实现?

   不能做精准深分页，否则压力太大，找产品进行妥协，在50或100页后数据分页是否可以不完全精确，假如可以，那么缓存深页码的起始评论 id 瞬时写入量很大可能会打挂存储, 怎么保护?

10. 请你设计一个秒杀系统？

11. 银行的后端如果出现多人想一个账户大钱的情况，会碰到什么问题？-------------站在后台程序员的角度相当于对数据库的同一个记录更新，并发写操作……进行阐述……

12. 1.假如一个风控系统响应速度突然变慢怎么排查

13. .说一下你项目中做的登录那块的逻辑,包括前台后台如何进行交互的?考察你的代码逻辑是否具备.

14. 8.谈谈对DDD的理解以及项目中有使用到吗？

15. 集群监控所要注意的技术栈指标，如何优化等------

16. 上亿级的数据，会面临哪些技术瓶颈挑战，如何解决？------

17. 让你来推广广告，你会怎么设计？

18. 10、请你设计一个秒杀系统？

19. 让我设计一个知识问答系统，问下有什么思路,具体怎么做,哪一部分都主要做了什么?

20. 问一下你的做过哪些项目,比如我说我做过一个项目中的秒杀系统模块,他就会问你你这个项目设计方面懂吗?用到了哪些技术

21. 发散性问题：假如有100万个玩家，需要对这100W个玩家的积分中前100名的积分，按照顺序显示在网站中，要求是实时更新的。积分可能由做的任务和获得的金钱决定。问如何对着100万个玩家前100名的积分进行实时更新？

    我balabala，但后来他都说我的方法都是从全局的数据进行考虑的，这样空间和时间要求太多，并且不现实。后来我跟他一顿讨论，最后他给出了解决方法，思路就是考虑出了前100名的后100W-100名玩家的积分，让变化的积分跟第100名比较，如果比第100名高，那就替换的原则。就是利用缓存机制，缓存---tomcat---DB，层级计算，能不用到DB层就别用，因为每进一层，实现起来都会更复杂和更慢。

22. .设计一个系统，系统每天有100亿数据，在后台做实时展示和查找。 我当时回答的思路大致是nginx负载均衡，消息队列存储，多线程读取，批量插入，数据库分库分表。面试官根据我的回答又衍生出了很多问题，如消息队列存满了怎么办？（也就是消费跟不上生产）批量插入时某一条失败了有什么影响？怎么解决？分库分表应该怎么分？怎么解决数据迁移的问题？

23. 设计一个秒杀系统

24. 32.设计一个系统，每天有100亿条数据，需要在后台做实时展示和查找。 我当时回答的大体思路是nginx负载均衡，消息队列存储，多线程读取，批量插入，数据库分库分表。 面试官根据我的回答又衍生出了很多问题，如消息队列存满了怎么办？（也就是消费跟不上生产）批量插入时某一条失败了有什么影响？怎么解决？分库分表应该怎么分？怎么解决数据迁移的问题？

25. 5亿整数的大文件，怎么排？

26. > 设计秒杀系统要考虑哪些点?

    > 1. 数据预热 秒杀都是瞬时操作，不要等流量来了再加载数据。可以提前对数据进行预热，比如加载到缓存等。
    > 2. 缓存 包括CDN缓存和数据缓存。保证缓存系统的高可用，数据随后落地。
    > 3. 解决超卖 引入MQ，串行化操作库存，达到阈值后不再消费，并关闭购买功能。或者直接操作缓存。
    > 4. 流量削峰 通过引入MQ，将耗时业务进行削峰，平稳处理用户需求。
    > 5. 熔断限流 熔断，优先保证主要业务的进行。限流，识别异常流量，进行封锁；同时，允许部分请求失败。
    > 6. 弹性扩容 在判断系统负载达到极限时，可以通过增加服务器的途径抵抗峰值。需要打通运维环境，能够快速扩容。

27. 微博评论长链接短链接的问题，让我设计一个服务来处理长链接短链接，包括怎么读怎么存等。

28. 5.微服务优缺点

#### 网络

1. 简述三次握手？第三次握手失败怎么处理？
2. 简述四次握手？
3. TCP通信相关步骤、函数
4. TCP协议哪些字段
5. 如果cookie禁用，如何保证单点登录？
6. .建立HTTP连接的三次握手的过程？客户端和服务端分别是什么状态。讲一讲Http和Https的区别。
7. http的长连接和短连接，谈谈你的理解？重定向和请求转发的区别？
8. TCP三次握手，除了ACK这种东西还有什么数据
9. TCP time_wait 什么时候出现
10. 简单描述一下http的七层协议
11. 、ttp request的几种类型
12. Http怎么处理长连接
13. 、Cookie与Session的作用于原理
14. 访问一个网页，整个过程是怎么样的：DNS、HTTP、TCP、OSPF、IP、ARP
15. 主动关闭连接的一方需要维持此状态等待FIN信号，返回ACK
16. 使旧数据包在网络中过期（否则如果关闭后重新创建连接会无法辨别上个链接的数据导致错乱）
17. TCP三次握手四次挥手详细画出来
18. TPC、UDP、IP、套接字之间的关系
19. IP协议对应于网络层，TCP/UDP协议对应于传输层(解决如何传输)，而HTTP协议对应于应用层（解决如何包装数据）
20. 套接字（socket），是对TCP/IP协议的封装，提供调用接口
21. 输入一个URL按下回车发生了什么？
22. 像DNS服务器请求解析域名对应的IP地址
23. 建立HTTP连接，因为应用层的HTTP协议是基于网络层的TCP协议的，因此需要建立TCP连接（三次握手）
24. 发送http请求（该请求报文作为TCP三次握手的第三个报文传送给服务器）
25. 服务器对请求做出响应，返回HTML文本
26. 结束tcp连接（四次挥手） 浏览器解析HTML文本并显示
27. 8.HTTP 1.1版本增加了哪些内容？有哪几种请求方式？
28. 9.描述下HTTP三次握手和四次挥手过程？为什么需要四次挥手？为什么TIME_WAIT状态需要经过两个最大报文段生存时间才能到close状态？
29. 10.浏览器发起一个请求到收到响应中间经历了哪些过程？知道多少就说多少，越详细越好。
30. TCP 和 UDP 有什么区别?
31. 描述一下 TCP 四次挥手的过程中
32. TCP 有哪些状态
33. TCP 的 LISTEN 状态是什么
34. TCP 的 CLOSE_WAIT 状态是什么
35. 建立一个 socket 连接要经过哪些步骤
36. 常见的 HTTP 状态码有哪些
37. 301和302有什么区别
38. 504和500有什么区别
39. HTTPS 和 HTTP 有什么区别
40. 8.Socket编程 nio（这一块我不太熟就说没了解过，面试官就没细问了）
41. .HTTP 1.1版本增加了哪些内容？有哪几种请求方式？
42. 2.描述下HTTP三次握手和四次挥手过程？为什么需要四次挥手？为什么TIME_WAIT状态需要经过两个最大报文段生存时间才能到close状态？
43. 3.浏览器发起一个请求到收到响应中间经历了哪些过程？知道多少就说多少，越详细越好。
44. 31.Socket编程 nio（这一块我不太熟就说没了解过，面试官就没细问了）
45. 4、我看你简历里说熟悉计算机网络，来聊一聊计算机网络吧。了不了解tcp/udp，简单说下两者的区别？tcp为什么要三次握手和四次挥手？两次握手可以不？会有什么问题？
46. tcp怎么保证有序传输的，讲下tcp的快速重传和拥塞机制，知不知道time_wait状态，这个状态出现在什么地方，有什么用？
47. 、http与https有啥区别？https是怎么做到安全的？
48. 6.讲一讲计算机网络的三次握手和四次挥手？为什么要三次握手，两次可以不？
49. 2.计算机网络TCP的三次握手，UDP和TCP的区别。

#### MySQL

1. 数据库主从同步有延迟怎么办

2. 数据库事务的隔离级别有哪些？Mysql默认的隔离级别？不同的隔离级别是通过什么实现的？

3. 如何修改慢查询（最小成本更改）

4. 数据库索引是否命中判断

5. 数据库innodb和myisam的区别（索引结构）

6. 索引的数据结构（b+树）

7. mysql的explain有用过吗？讲一讲数据库的慢查询？数据库的悲观和乐观锁都说一下吧，什么时候用乐观锁比较合适？什么时候用悲观锁呢？

8. 索引使用注意事项；

9. 21、你工作中常用的数据库？非关系型数据库有哪些？请你谈谈索引（优缺点），索引底层怎么实现的？事务隔离级别？垂直拆分、水平拆分有用过吗？

10. 、你们数据库有没有用到分库分表，怎么做的？分库分表以后全局id怎么生成的？

11. 、索引的常见实现方式有哪些，有哪些区别?MySQL的存储引擎有哪些，有哪些区别？InnoDB使用的是什么方式实现索引，怎么实现的？说下聚簇索引和非聚簇索引的区别？

12. 时序型数据库的存储结构是怎么样的? 讲了 prometheus 1.x 和 2.x 的存储结构 LSM 树了解吗? 是一种什么存储结构?

    Log-Structured Merge Tree，牺牲读性能换取性能，RocksDB、HBase、Cassandra 都在用，结构有点忘了，只说了先写 memtable 再刷盘成 sstable 在生产中用过 Cassandra 和 RocksDB 吗? 量有多大?

    用过，Cassandra 存调用链，RocksDB 做 flink 和 Kafka Stream 的本地状态存储 Cassandra 的墓碑机制是什么?

    不知道，对 Cassandra 停留在使用阶段

13. 什么是分库分表，以及分库分表的具体方法和使用场景；

14. 数据库事务的 ACID；

15. .索引相关,平时用过索引吗?具体用了哪些索引?索引一定会提高数据库查询性能吗?

16. 谈一下MySQL常见的两种存储引擎，适用场景------MyISAM和InnoDB的对比，MyISAM有meta-data统计行数（count *）不需要消耗多少资源。但InnoDB支持事务（提交、回滚）崩溃修复的安全机制。……性能上MyISAM更快，安全上InnoDB更安全，所以主从分离的情况下还需要给予实际业务的并发场景…… 谈谈你对数据库索引的理解--------将无序数据整合成有序数据，保证查找的效率更快和维护的唯一性；mysql主要用到的索引有哈希索引和BTree索引……具体再阐述下内容。。。 如何保证缓存和数据库双写的一致性-----------------结合自己的工作经验公司项目中的处理措施，比如监听数据库变更，然后更新缓存……自己阐述。。。

17. 数据库索引，底层的实现，B树索引的引入

18. Mysql主从同步的实现原理，如何应用B+树

19. 数据库的乐观锁、悲观锁------金融产品系统的常客吧，刚好他们公司也在用。悲观锁就是断定一定会发生并发控制下的冲突，每次获取数据做操作时都会上锁，屏蔽一切影响数据完整性的操作。乐观锁就是断定不会有冲突，只在提交时检查数据完整性。 NoSQL数据库，以及MongDB和Redis使用场景？

20. MySQL 的存储引擎用的是什么?（InnoDB）为什么选 InnoDB?

21. 分布式序列数据库用过吗?怎么设计的了解吗?

22. 事务隔离级别,清楚地描述事务的每个隔离级别,随机找出一个进行提问细节

23. Mysql中如何实现分页的,结合项目来写一个sql？Oracle中又是如何实现的,能否结合项目中用的来具体说明一下?

24. Mysql的存储引擎了解吗?Innodb?

25. sql优化都有哪些?你们项目中用了哪?具体描述一下

26. 数据库索引原理

27. 6.数据库索引，多级索引。

28. 务隔离级别？mysql默认级别是什么？事务传播属性？spring默认是什么？嵌套事务子事务什么时候commit？

29. 为什么索引采用B+树而不是hash（就磁盘页面存储原理）

30. 数据库分表查询如何定位

31. mysql索引

32. B+树原理

33. 请你写一个分页的SQL语句？

34. 脏读、幻读、不可重复读？

35. 索引原理，为什么采用B+树？还有哪几种树？为什么不用二叉搜索树？B+树如何分裂？

36. 创建索引注意事项，如何有效建立索引（给了个场景）？

37. 数据库索引怎么实现

38. B+树查询效率如何，节点数和高度的关系

39. innodb怎么实现可重复读

40. MySQL 关系型，传统sql，成熟的体系。 数据量很大时变慢

41. MySQL默认事务隔离级别？什么时候脏读、幻读？如何实现事务？@Transactional注解的参数意义以及注解实现事务的原理？

42. innodb默认隔离级别：可重复读

43. MongoDB和MySQL的区别，各自使用场景

44. MongoDB 非关系型，文档存储，独特的sql，快速（热数据存在内存），高扩展（分片），json格式。 不支持事务，单个文档支持原子性操作

45. MongoDB是原子性的吗

46. MySQL，事务隔离级别，什么时候脏读，什么时候读已提交

47. 23.mysql索引是怎么实现的？b+树有哪些特点？真实的数据存在哪里？

48. 24.哪些情况下建索引？解释下最左匹配原则？ 现在一个表有三列a b c，组合索引(a,b,c)查询的时候where a like ? and b=? and c=?能用到这个组合索引吗？为什么？

49. 25.explain执行计划看过没有？其中type字段都有哪些值？分别代表什么？

50. 26.你有哪些sql调优经验？

51. 事务隔离级别？mysql默认级别是什么？事务传播属性？spring默认是什么？嵌套事务子事务什么时候commit？

52. .mysql索引是怎么实现的？b+树有哪些特点？真实的数据存在哪里？

53. 2.哪些情况下建索引？解释下最左匹配原则？

54. 现在一个表有三列a b c，组合索引(a,b,c)查询的时候where a like ? and b=? and c=?能用到这个组合索引吗？为什么？

55. 3.explain执行计划看过没有？其中type字段都有哪些值？分别代表什么？

56. 4.你有哪些sql调优经验？

57. 关于分库分表（为什么要分库分表，用过哪些分库分表中间件）----

58. 分库分表的方法-----------结合项目，垂直和水平拆分

59. 如何设计动态扩容缩容的分库---

60. 分库分表全局ID如何生成----

61. MySQL的行锁的实现原理

62. 5、事务隔离级别，聚集锁非聚集锁（问到了一个非常细节的问题：如何用可重复读的隔离级别避免幻读）

63. > 数据库索引结构 B+ Tree，为了适应缓慢的磁盘而生的一种索引结构。必须保证按照索引的最左前缀查询。 Hash 和HashMap类似，处理冲突的方式是链表 pg的索引结构就多了去了。Mysql这么少怎么感觉怪怪的？难道要我回答存储引擎的区别？

    > select * from t where a=? and b>? order by c limit 0,100 如何加索引 知道这个就结论就行了=> 当order by 字段出现在where条件中时，才会利用索引而无需排序操作。其他情况，order by不会出现排序操作。 按照最左原则，我可以创建 (a,b) 的索引。 什么是聚簇索引和非聚簇索引 一个表只能有一个聚簇索引。主索引文件和数据文件为同一份文件，默认的InnoDB就支持聚簇索引，B+ Tree的叶子节点上的data就是数据本身。 而MyISAM就不支持聚簇索引，它的叶子结点存放的不是数据本身，而是数据存放的地址。在文件结构上，会分为一个索引文件、一个数据文件。 对编程来说没什么鸟用。
    >
    > mysql索引是怎么组织的
    >
    > 普通索引和主键索引的区别
    >
    > mysql一条查询需要经过哪些组件
    >
    > MVCC的实现原理
    >
    > MySQL慢查询的优化思路
    >
    > 什么是刷脏页 Innodb中索引的实现 B+树

几乎所有公司用 MySQL 都用 InnoDB，降低踩坑成本；聚簇索引，MVCC MySQL 的聚簇索引和非聚簇索引有什么区别?

聚簇索引的叶子节点是数据节点（比如定义了主键时的主键索引），非聚簇索引叶子节点是指向数据块的指针 B+树和二叉树有什么区别和优劣?

B+树是多叉树，深度更小，B+树可以对叶子节点进行顺序遍历，B+树能够更好地利用磁盘扇区；二叉树：实现简单 针对一个场景设计索引，具体场景忘记了，反正考察的是联合索引与列选择性的知识 现有一个新的查询场景, 要怎么解决?

假如要查 A in () AND B in (), 怎么建索引? 只给选择性高的一列建索引，这里因为两个都是范围查询所以另一个是走不到索引的（这里答的不好，其实也可以建联合索引然后用 （A,B) in ((1,2),(3,4)) 的方式去查） 查 A in () AND B in () 时, MySQL 是怎么利用索引的?

先走一个非聚簇索引，查询出行数据后再用另一列回表做筛选 假如查询 A in (), MySQL 是针对 N 个值分别查一次索引, 还是有更好的操作?

不知道，有了解的同学可以留言

5.讲讲数据库乐观锁和悲观锁？各自的适用条件？有没有sql调优经历。

7.数据库的ACID和隔离级别？ 分布式事务了解吗？有哪些处理方法？

#### 虚拟机

1. JVM性能调优的监控工具了解那些？

2. 简单谈谈JVM内存模型，以及volatile关键字

3. 垃圾收集器与内存分配策略

4. JVM垃圾回收，fullgc是否可以回收方法区

5. 定义Integer x=20 Integer y=200 在内存里是个什么过程？

6. 3、fullgc的时候会导致接口的响应速度特别慢，如何排查和解决

7. 垃圾收集算法

8. java内存泄漏?描述一下场景?

9. 什么时候触发minor GC 什么时候触发full GC

10. 25、请你说一下类加载过程？

11. 简单说一下JVM的垃圾回收？垃圾回收有哪些算法？标记-清除和标记-整理算法的原理、区别？

12. .如果web服务器突然出现频率很高的FullGC，可能是什么原因?你会怎么去排查呢？

13. 26、对象是如何实例化的？

14. .讲一讲类加载器工作机制？你知道强引用、弱引用和软引用吗?为什么要有这些东西？他们有什么作用？你在项目中用过吗？

15. Java的内存模型，分为哪几块存储区，各个存储区域的作用？说一说volatile，一般什么时候用这个，给我举个例子呗

16. 自己写的java应用条有过哪些JVM参数，为什么这么调优

17. 这个问住了，我只知道最大堆最小堆，开G1开GC日志以及OOM dumper这些基本的

18. 24、Java垃圾处理方法，如何GC？谈一谈内存划分的功能？JVM调优？

19. 19、Java是否有内存泄漏和溢出？工作中遇到过泄漏吗？怎么查内存泄漏？

20. 13.jvm的垃圾回收算法？

21. > 自定义类加载器怎么实现，其中哪个方法走双亲委派模型，哪个不走，不走的话怎么加载类（实现findclass方法，一般用defineclass加载外部类），如何才能不走双亲委派。（重写loadclass方法）

    > JVM 判断对象是否回收? 答案就是GC roots。也就是从根对象出发，没有任何一个对象引用到它，那么就判断这个对象是不可达的。 通常被骂“断子绝孙”的人，就是要被回收的root
    >
    > GCROOT 有哪些?
    >
    > ```
    > 1. 虚拟机栈（栈帧中的本地变量表）中引用的对象。
    > ```
    >
    > 1. 本地方法栈中JNI（即一般说的native方法）引用的对象。
    > 2. 方法区中的静态变量和常量引用的对象。
    > 3. 活跃线程的引用对象
    >
    > 所以不要让他们过度繁殖。
    >
    > 是否有过JVM调优

22. 3.对Java的垃圾回收机制了解吗？垃圾回收器呢？说一下CMS？OOM的排查思路？

23. JVM内存模型 G1和CMS垃圾回收器

24. JVM垃圾回收机制以及四大算法优化策略是如何实现的,新生代和老年代

25. 说一下gc

26. 讲讲对JVM的理解，讲了GC

27. jstate是否使用， 如何查看线上内存是否泄漏；

28. Java应用启动时可以选择哪些GC,cms的原理

29. 描述下JVM内存模型。每个区的作用是什么？堆内存的工作原理，为什么需要两个幸存区？只有一个行不行？老生代是用什么垃圾回收算法？

30. 类加载机制

31. 类的生命周期

32. JVM组成

33. 分析操作数栈和局部变量表

34. 1、什么是值传递和引用传递?

35. 5、Java 8 内存模型进行了哪些改进?

36. 15、如和判断一个对象是否存活?(或者GC对象的判定方法)?

37. 16、Java类的实例化顺序?

38. 9、简述java内存分配与回收策率以及Minor GC和Major GC?

39. 、描述类加载器工作机制?

40. java中垃圾收集的方法有哪些?

41. 类加载器有哪些?

42. 描述Java内存模型?

43. java虚拟机GC算法

44. 3.描述下JVM内存模型。每个区的作用是什么？堆内存的工作原理，为什么需要两个幸存区？只有一个行不行？老生代是用什么垃圾回收算法？

45. 1.jvm底层原理和排查命令

46. Java虚拟机的内存模型------建议直接上草图和面试官聊……

47. 谈谈虚拟机创建对象的过程------虚拟机获取到new指令后能否在常量池中定位到一个类的符号引用，并检测是否被加载和初始化，然后为新生对象分配空间并初始化，设置对象头……

48. 虚拟机创建对象会出现并发问题吗？----------说实话国内作为业务为主的程序员实际不用关注虚拟机（产品）的并发问题，这是老外升级或发布产品该考虑的事。给对象A分配内存时指针还没来的及修改，对象B又使用该指针来分配内存，所以会出现并发问题，至于怎么规避……我不晓得。

49. 内存溢出一般发生在哪个区？永久代会不会导致内存溢出？------Java堆溢出，创建对象回收不及时肯定会导致。本地方法栈溢出，线程请求的空间大于虚拟机能够提供的空间或者虚拟机扩展栈大于物理机空间。方法区JDK1.7逐渐取代了所谓的永久代之说……具体的也说不清楚了。。。 栈溢出一般抛出什么异常？jvm设置栈的大小，参数？--------线程请求的栈大于虚拟机允许的容量抛出StackOverflowError异常，虚拟机扩展栈时受制于物理机的限制会抛出OutOfMemoryError异常。-Xss虚拟机参数…… JVM的垃圾回收机制-----个人认为从三点来回答：那些内存需要回收？什么时候回收？怎么回收？一般来说垃圾收集器关注的主要是堆中的对象生命周期的动态变化，首先判断该对象的存活与否，生命周期耗尽的对象给予回收…… 用过哪些命令查看JVM的状态、堆栈信息？--------jps命令，jstat命令，jmap内存映像工具……

50. Java的类加载机制？自定义类加载器的实现？------虚拟机把描述类的数据从Class文件加载到内存，并对数据进行校验、转换解析和初始化，最终形成可以被虚拟机直接使用的Java类型。每个类都需要由加载它的类加载器和该类本身一起确立在Java虚拟机的唯一性，类加载器都拥有一个独立的类名称空间。比较类的相等必须在同一个类加载器下比较才有意义……

**设计模式**

1. 常用的设计模式
2. 设计模式的应用 装饰者模式 责任链模式
3. 责任链模式用之前后区别/好处 责任链模式和策略模式区别 责任链模式和装饰者模式的区别
4. 讲讲对设计模式的理解和运用，讲了责任链、生产者消费者
6. 12.设计模式大致说下你熟悉的框架中用到的设计模式
7. 13.项目中用到的设计模式。
8. 你了解哪些设计模式啊。挑一个熟悉的讲讲？（除了单例模式）在项目中有用过设计模式吗？讲讲你怎么用的？简单说一下***模式和装饰器模式？
9. Java常用的设计模式之单例设计模式,包括懒汉式和恶汉式,哪个是线程安全的?常用哪个？双检锁机制的代码coding(现场写一个
10. 12.你了解哪些设计模式？讲一讲观察者模式和策略模式？
11. 责任链模式的好处 happends before
12. 你了解哪些设计模式，列举几个?jdk中用到了哪些设计模式?


**I/O**

1. NIO原理，怎么实现非阻塞IO
2. IO流,如果是想导出报表用到字节流还是字符流？具体是哪个?代码实现?
3. 9.SELECTED?IO?不清楚这个，没听过。
4. NIO了解么，讲一下和BIO的区别，AIO呢。阻塞，非阻塞，异步，具体。
5. 20、请你谈一谈Java中的IO，它们之间的区别？
6. 12、Java中有几种类型流？他们的区别你知道吗？

#### 操作系统

1. 线程、进程区别和联系
2. 如何实现跨语言跨系统通信；
3. 进程间通信方式，共享内存怎么实现的
4. 线程阻塞一定同步，同步一定阻塞？
5. 进程和线程区别，如何实现进程之间通信，线程之间如何通信；
6. 17、请你谈谈你对cron的理解？
7. 6、有没有了解过协程？说下协程和线程的区别？用过哪些linux命令？如查看内存使用、网络情况？
8. 进程间通信方式 1、管道 无名管道 半双工，仅用于亲缘关系的进程(父子进程、兄弟进程)，只存在于内存中。 2、FIFO 命名管道，它是一种文件类型。可以在无关的进程之间交换数据，存在于文件系统中。 3、消息队列，存放在内核中，由一个标识符（即队列ID）来标识。 消息队列是面向记录的，其中的消息具有特定的格式以及特定的优先级。 消息队列独立于发送与接收进程。进程终止时，消息队列及其内容并不会被删除。 消息队列可以实现消息的随机查询,消息不一定要以先进先出的次序读取,也可以按消息的类型读取。 4、信号量 5、共享内存 进程用页表来关联虚拟地址和物理地址，将不同的虚拟地址关联到同一个物理地址。相关函数：创建共享内存/shmget、挂接共享内存/shmat、去关联共享内存/shmdt、销毁共享内存/shmctl 共享内存是最快的一种 IPC，因为进程是直接对内存进行存取。 因为多个进程可以同时操作，所以需要进行同步。 信号量+共享内存通常结合在一起使用，信号量用来同步对共享内存的访问。
9. .线程间通信的方式?假如现在在同一台机器上开两个java项目，有几个java虚拟机？产生死锁的四个必要条件还记得吗？聊聊linux吧，lsof这个命令用过吗？讲一讲linux系统的启动过程？
10. 17.怎么查看某个进程中的线程？
11. linux下怎么查看一个端口有没有被占用
12. 内核态、系统态各自是啥，为什么要区分
13. 7.LINUX进程与线程区别，进程间怎么通信，linux查询进程命令，怎么查询进程状态，线程IO，LINUX命令。
14. 内存碎片怎么处理
15. 18.怎么批量替换一个文件夹下所有文件中的一个字符？（sed命令）
16. 19.有没有用过jps jmap jstack jstat 命令，分别说下有哪些常用参数，知道多少就说多少。 我这里结合自己用jmap jstack定位到线上问题的经验说的，答完后感觉面试官挺满意的，所以说实践很重要啊
17. 33.用代码实现cat 1.log |grep a |sort |uniq -c |sort -rn 的功能。
18. 34.如果现在有一台服务器突然变得很慢，怎么去定位问题？
19. 2.用代码实现cat 1.log |grep a |sort |uniq -c |sort -rn 的功能。
20. 3.如果现在有一台服务器突然变得很慢，怎么去定位问题？
21. 16.内存分配以及优化。
22. .常用的linux命令,比如如何查看8080端口是否被占用?以及如何查看一个进程是否成功启动了?如何查看实时日志?这些linux命令不仅运维的人要熟悉,做开发的也要熟悉,检验你的功底
23. 17.cpu or 内存占用100%怎么解决。
24. 单个文档的操作是
25. 29、如何排查线程挂起？
26. 列举几个你了解的几个常见的运行时异常?

#### kafka

1. kafka消息消费容错机制；
2. ES 倒排索引原理
3. 为什么kafka需要集群，估计kafka吞吐量多少
4. rocketMQ消息是否有序？可否有序（有序队列）？是否支持事务
5. 如何保证消息队列的高可用？
6. 消息队列重复消费情况------对于kafka会有一个消息编号，专业术语offset。消费者按照编号顺序消费队列，并且定时上交消费记录，如果出现消费者宕机则重启以后依照offset编号继续。如果消息队列的offset没有提交消费者已经消费的消息，那么消费者重启后就产生重复消费。
7. 介绍一下 Kafka 的 ConsumerGroup
8. Kafka 的消费者如何做消息去重?
9. 3.我看你还用了RabbitMQ，简单说一下RabbitMQ的工作原理？如何保证消息的顺序执行？Kafka了解吗？和RabbitMQ有什么区别？你为啥不用kafka来做，当时怎么考虑的？
10. 你这里为什么要用消息中间件呢？不用可以吗？
11. 11.kafka如何保证不丢消息又不会重复消费。
12. 如何保证消息队列的幂等性---------前面挖的坑，既然有了重复消息，那就得去重解决呀。把接收到的消息先查询一下已写入的库，如果不存在那就消费。相当于在数据库写入之前做一个查询验证。
13. 消息队列丢失消息的可能性------------生产者弄丢了（消息MQ开启事务监控MQ是否受到消息但由于同步阻塞原因性能比较低，还有一种属于异步回调机制效率比较高……）、MQ宕机弄丢了（消息队列开启的持久化……创建持久化和发送时的设置持久化缺一不可），消费者消费时弄丢（消息队列的ack机制……）。
14. 消息队列的顺序性如何保证？
15. 消息队列的延时以及过期失效？
16. 消息队列存满了，而有上百万的消息持续积压问题------硬件扩容，多加几台机器消费消息。
17. 如何设计一个消息队列架构呢？说说你的看法？---------把消息队列就看作一个假设在数据库和客户端请求中间的一个中间件，这个中间件接受来自成千上万的客户端请求，然后将请求落地到数据库中。而且实现这个消息队列架构要考虑扩展（加物理机分布式架构），安全（顺序和丢失问题，那就为队列消息编号）……
18. kafka的replicas的作用，为什么比其他的消息队列好。
19. 4.kafka一致性原理 消费时的消息丢失和重复如何解决
20. 12.kafka的优势和发送过程？

**elasticsearch**

1. ES 倒排索引原理

**mybatis**

1. Mybatis怎么实现Dao的一系列操作?原理简单介绍
2. MyBastis如何映射，MyBatis原理。
3. mybatis中的一级缓存和二级缓存?在项目中的应用
4. mybatis中的关系映射?

**docker**

1. docker的原理？dockerfile里面用过什么命令？

2. > docker和虚拟机讲一下。

   > 听说你项目用过docker，讲一下docker的实现原理，说了虚拟机一般要对内核进行虚拟化，docker则用cgroup和namespace分别进行硬件和命名空间的隔离。

**tomcat**

> 你说了解Tomcat的基本原理，了解的是哪一部分，基本架构，connector和container

> Tomcat的类加载器了解么，回答不了解只了解Java的类加载器
>
> 5.你对tomcat有多少了解，nginx呢？把你知道的都说一下。有做过tomcat调优吗？

**算法**

1. 编程1：判断二叉树r2是否存在于二叉树r1

2. 编程2（讲思路）：二维数组左上角到右下角求最短路径和路线

3. 求n边形周长的K等分点坐标

4. 朋友圈和岛屿最大面积以及链表求和（头结点是高位）

5. 算法题：leetcode394

6. .算法在线编程：leetcode213

7. 如何自己实现lru？

8. leetcode647

9. 题目很基础leetcode110原题. 平衡二叉树。还是很幸运的。

10. 14、用队列你能实现栈的特性么？

11. 题目很基础leetcode110原题. 平衡二叉树。。

12. leetcode406.

13. 算法题: N 场演唱会, 以 [{startTime, endTime}…] 的形式给出, 计算出最多能听几场演唱会

    先讲了思路, 按 endTime 升序排列，再顺序取最多场次 (讲完思路之后)屏幕共享给我, 用你最熟悉的语言把这个算法实现

    用 go 实现了一版 你用了贪心法, 贪心可能会存在什么问题?

    局部最优，在这个问题里，只能找到一个可能解，无法找到所有排列方式

14. 给你一个字符串，添加最少字符情况下成为回文字符串？

15. 如何把一段逗号分隔的字符串转换成一个数组？---

16. 算法题, M*N 横向递增矩阵找指定数只想到 O(M+N)的解

17. 如何判断两个无环单链表有没有交叉点

18. 如何判断两个有环单链表有没有交叉点

19. 如何判断一个单链表有没有环, 并找出入环点

20. 写一个算法题: 手写快排

21. 手写代码：输入123456.234，输出：一十二万三千四百五十六点二三四

22. 手写代码leetcode91

23. 3.知道的排序算法，以及复杂度。

24. 4.两个1G排好序的文件，按序合并。

25. 5.二叉树层序遍历输出，每一层输出数组（手写算法）

26. 8.一个数组获取最大的k个数，大顶堆，排序。

27. 给定一个字符串，你的任务是计算这个字符串中有多少个回文子串。

28. 具有不同开始位置或结束位置的子串，即使是由相同的字符组成，也会被计为是不同的子串。

29. 示例 1:输入: "abc"输出: 3解释: 三个回文子串: "a", "b", "c". 示例 2:输入: "aaa"输出: 6说明: 6个回文子串: "a", "a", "a", "aa", "aa", "aaa".

30. 如何实现优先队列，链表，二叉树（大小堆），根据树节点数计算高度，查询速度和什么有关（高度）。

**netty**

1. 4、netty，如何避免的NIO空循环，零拷贝
2. 14.Netty的主要组件。
3. .了解netty吗？说一说你知道的。看过dubbo的源码吗？说一说你了解的
4. 5、实际项目中怎么使用Netty的，遇到过什么问题？Netty的线程模型、怎么确保高性能？
5. netty原理介绍

**zookeeper**

2.zk一致性原理

eureka怎么保证可用性，及底其层实现，与zookeeper有什么区别？

**duubo**

1. 你说你了解dubbo，能讲一下dubbo的基本原理吗？
2. 使用dubbo进行远程调用时消费端需要几个线程。
3. Dubbo原理介绍
4. 你们的项目为什么要进行系统拆分？-----业务模块的扩增，为了便于管理（简述下项目）。 dubbo工作原理？注册中心？-----service层对外提供访问接口，config框架自身各种配置， proxy层***之间进行网络通信，registry层连接生产者和消费者的桥梁，cluster层生产者集群部署多台机器，monitor层属于监控调用，protocol层具体的生产者和消费者之间调用接口的网络通信，exchange层信息交换，serialize层序列化……。 dubbo支持的通信协议和序列化协议？------ dubbo负载均衡和集群容错策略有哪些？动态***策略？------
5. dubbo的spi思想------
6. dubbo进行的服务治理、服务降级、失败以及重试-------
7. RPC框架原理，dubbo的作用？-------RPC翻译过来就是远程过程调用，阐述下不同的机器中服务调用……。dubbo就是应用而生的一款RPC开源框架，面向SOA（面向服务的架构）分布式架构，提供负载均衡，服务降级……
8. 阐述下dubbo的架构？----------------服务提供，服务消费，注册中心，监控中心，服务运行容器……画个草图出来最好。
9. 阐述dubbo的工作原理？--------
10. Dubbo负载均衡策略--------

**nginx**

1. nginx有哪些模块？你比较熟悉哪个？
2. proxy_***你是怎么配置的？缓存是存在哪里？具体是怎么命中缓存的？
